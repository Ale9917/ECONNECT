<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Econnect | Plataforma de Sostenibilidad Ambiental</title>
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjJjNTVlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTIxIDEyYzAgMS4xLS45IDItMiAySDVjLTEuMSAwLTItLjktMi0yVjZjMC0xLjEuOS0yIDItMmgxNGMxLjEgMCAyIC45IDIgMnYxeiI+PC9wYXRoPjxwYXRoIGQ9Ik02IDEyaDEydjhjMCAxLjEtLjkgMi0yIDJIOGMtMS4xIDAtMi0uOS0yLTJ2LTh6Ij48L3BhdGg+PHBhdGggZD0iTTEyIDEyVjIyIj48L3BhdGg+PHBhdGggZD0iTTEyIDJ2NCIgc3Ryb2tlPSIjMjJjNTVlIj48L3BhdGg+PHBhdGggZD0iTTE2IDEyYzAgMi4yLTEuOCA0LTQgNC0yLjIgMC00LTEuOC00LTQgMC0yLjIgMS44LTQgNC00IDIuMiAwIDQgMS44IDQgNHoiIGZpbGw9IiMyMmM1NWUiIHN0cm9rZT0ibm9uZSI+PC9wYXRoPjwvc3ZnPg==" />
    <link rel="shortcut icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMjJjNTVlIiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIgc3Ryb2tlLWxpbmVqb2luPSJyb3VuZCI+PHBhdGggZD0iTTIxIDEyYzAgMS4xLS45IDItMiAySDVjLTEuMSAwLTItLjktMi0yVjZjMC0xLjEuOS0yIDItMmgxNGMxLjEgMCAyIC45IDIgMnYxeiI+PC9wYXRoPjxwYXRoIGQ9Ik02IDEyaDEydjhjMCAxLjEtLjkgMi0yIDJIOGMtMS4xIDAtMi0uOS0yLTJ2LTh6Ij48L3BhdGg+PHBhdGggZD0iTTEyIDEyVjIyIj48L3BhdGg+PHBhdGggZD0iTTEyIDJ2NCIgc3Ryb2tlPSIjMjJjNTVlIj48L3BhdGg+PHBhdGggZD0iTTE2IDEyYzAgMi4yLTEuOCA0LTQgNC0yLjIgMC00LTEuOC00LTQgMC0yLjIgMS44LTQgNC00IDIuMiAwIDQgMS44IDQgNHoiIGZpbGw9IiMyMmM1NWUiIHN0cm9rZT0ibm9uZSI+PC9wYXRoPjwvc3ZnPg==" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <style>
        .login-options {
            display: flex;
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .login-option {
            flex: 1;
            padding: 0.75rem;
            border: 2px solid var(--primary-color);
            background: none;
            color: var(--primary-color);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .login-option.active {
            background: var(--primary-color);
            color: white;
        }
        
        .login-option:hover {
            background: var(--primary-color);
            color: white;
            opacity: 0.9;
        }
        
        .login-option i {
            margin-right: 0.5rem;
        }

        .email-input-group {
            position: relative;
        }

        .email-validation-message {
            color: #dc2626;
            font-size: 0.875rem;
            margin-top: 0.25rem;
            display: none;
        }

        .email-input-group input:invalid {
            border-color: #dc2626;
        }

        .email-input-group input:valid {
            border-color: #22c55e;
        }
    </style>
</head>

<body>
    <header>
        <div class="header-content">
            <a href="javascript:void(0);" onclick="volverInicio()" class="logo-link">
                <div class="logo">
                    <div class="logo-icon">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <span class="logo-text">Econnect</span>
                </div>
            </a>
            <!-- Navegación para usuarios no autenticados -->
            <nav class="nav-buttons" id="auth-nav">
                <button class="btn btn-secondary" onclick="mostrarFormularioLogin()">
                    <i class="fas fa-sign-in-alt"></i>
                    <span class="btn-text">Iniciar Sesión</span>
                </button>
                <button class="btn btn-primary" onclick="mostrarFormularioRegistro()">
                    <i class="fas fa-user-plus"></i>
                    <span class="btn-text">Registrarse</span>
                </button>
            </nav>
            <!-- Navegación para usuarios autenticados -->
            <nav class="nav-buttons desktop-nav" id="main-nav" style="display: none;">
                <button class="btn btn-primary" onclick="mostrarSeccion('progreso')">
                    <i class="fas fa-chart-line"></i>
                    <span>Progreso</span>
                </button>
                <button class="btn btn-primary" onclick="mostrarSeccion('desafios')">
                    <i class="fas fa-tasks"></i>
                    <span>Desafíos</span>
                </button>
                <button class="btn btn-primary" onclick="mostrarSeccion('recompensas')">
                    <i class="fas fa-trophy"></i>
                    <span>Recompensas</span>
                </button>
                <button class="btn btn-primary" onclick="mostrarSeccion('videos')">
                    <i class="fas fa-play-circle"></i>
                    <span>Videos</span>
                </button>
                <button class="btn btn-secondary btn-icon" id="perfilBtn" onclick="verPerfil()">
                    <i class="fas fa-user"></i>
                </button>
                <button class="btn btn-danger btn-icon" id="cerrarBtn" onclick="cerrarSesion()">
                    <i class="fas fa-sign-out-alt"></i>
                </button>
            </nav>
        </div>
    </header>

    <!-- Barra de navegación inferior para móviles -->
    <nav class="mobile-nav" id="mobile-nav" style="display: none;">
        <button class="nav-item" onclick="mostrarSeccion('progreso')">
            <i class="fas fa-chart-line"></i>
            <span>Progreso</span>
        </button>
        <button class="nav-item" onclick="mostrarSeccion('desafios')">
            <i class="fas fa-tasks"></i>
            <span>Desafíos</span>
        </button>
        <button class="nav-item" onclick="mostrarSeccion('recompensas')">
            <i class="fas fa-trophy"></i>
            <span>Recompensas</span>
        </button>
        <button class="nav-item" onclick="mostrarSeccion('videos')">
            <i class="fas fa-play-circle"></i>
            <span>Videos</span>
        </button>
    </nav>

    <div class="container">
        <div class="intro-section">
            <div class="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1532996122724-e3c354a0b15b?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1600&q=80" alt="Reciclaje">
                        <div class="carousel-caption">
                            <h2>Reciclaje Transformador</h2>
                            <p>El reciclaje no es solo separar residuos, es transformar hábitos de consumo y reducir nuestra huella ecológica global. En Econnect, incentivamos prácticas sostenibles con impacto medible.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1559825481-12a05cc00344?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1600&q=80" alt="Conservación del agua">
                        <div class="carousel-caption">
                            <h2>Protección del Agua</h2>
                            <p>El agua es el recurso más valioso del planeta. Nuestros programas de conservación incluyen sistemas de monitoreo, reducción de consumo y protección de cuencas hidrográficas.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1523712999610-f77fbcfc3843?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1600&q=80" alt="Energías renovables">
                        <div class="carousel-caption">
                            <h2>Energía Sostenible</h2>
                            <p>La transición energética es clave para combatir el cambio climático. Apoyamos iniciativas de energía solar, eólica y alternativas que reducen emisiones de carbono en comunidades locales.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img src="https://images.unsplash.com/photo-1511884642898-4c92249e20b6?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1600&q=80" alt="Biodiversidad">
                        <div class="carousel-caption">
                            <h2>Protección de Ecosistemas</h2>
                            <p>La biodiversidad es fundamental para la resiliencia del planeta. Nuestros proyectos de conservación ayudan a preservar hábitats críticos y especies en peligro de extinción.</p>
                        </div>
                    </div>
                </div>
                <div class="carousel-controls">
                    <button class="carousel-control" onclick="moverCarrusel(-1)">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <button class="carousel-control" onclick="moverCarrusel(1)">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <div class="carousel-indicators">
                    <span class="indicator active" onclick="irASlide(0)"></span>
                    <span class="indicator" onclick="irASlide(1)"></span>
                    <span class="indicator" onclick="irASlide(2)"></span>
                    <span class="indicator" onclick="irASlide(3)"></span>
                </div>
            </div>

            <div class="app-description">
                <h2>Bienvenido a Econnect</h2>
                <p>Econnect es una plataforma innovadora diseñada para inspirar y recompensar acciones positivas hacia el medio ambiente. Nuestra misión es conectar a personas comprometidas con la sostenibilidad y crear un impacto real en nuestro planeta.</p>

                <!-- Nueva sección de estadísticas de contaminación -->
                <div class="stats-section">
                    <h3>Estadísticas Globales de Contaminación</h3>
                    <p class="stats-intro">La contaminación ambiental es uno de los mayores desafíos que enfrenta nuestro planeta. Estas cifras nos muestran la urgencia de actuar.</p>

                    <div class="stats-grid">
                        <div class="stat-box">
                            <div class="stat-icon">
                                <i class="fas fa-trash"></i>
                            </div>
                            <div class="stat-number" id="plasticStat">8.3</div>
                            <div class="stat-unit">mil millones de toneladas</div>
                            <div class="stat-description">de plástico producido desde 1950, del cual solo el 9% ha sido reciclado</div>
                        </div>

                        <div class="stat-box">
                            <div class="stat-icon">
                                <i class="fas fa-smog"></i>
                            </div>
                            <div class="stat-number" id="airStat">7</div>
                            <div class="stat-unit">millones de personas</div>
                            <div class="stat-description">mueren anualmente por enfermedades relacionadas con la contaminación del aire</div>
                        </div>

                        <div class="stat-box">
                            <div class="stat-icon">
                                <i class="fas fa-water"></i>
                            </div>
                            <div class="stat-number" id="waterStat">80%</div>
                            <div class="stat-unit">de aguas residuales</div>
                            <div class="stat-description">se vierten sin tratar en ríos, lagos y océanos a nivel mundial</div>
                        </div>

                        <div class="stat-box">
                            <div class="stat-icon">
                                <i class="fas fa-temperature-high"></i>
                            </div>
                            <div class="stat-number" id="co2Stat">36.8</div>
                            <div class="stat-unit">mil millones de toneladas</div>
                            <div class="stat-description">de CO₂ emitidas anualmente por actividades humanas</div>
                        </div>
                    </div>

                    <div class="stats-source">Fuente: ONU Medio Ambiente, OMS, Global Carbon Project (2023)</div>
                </div>

                <div class="app-features">
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-leaf"></i>
                        </div>
                        <h3>Desafíos Verdes</h3>
                        <p>Participa en desafíos ecológicos y gana puntos mientras ayudas al planeta.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-award"></i>
                        </div>
                        <h3>Recompensas</h3>
                        <p>Obtén insignias y cupones de descuento por tus acciones ambientales.</p>
                    </div>
                    <div class="feature-item">
                        <div class="feature-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3>Comunidad</h3>
                        <p>Únete a una comunidad de personas comprometidas con el medio ambiente.</p>
                    </div>
                </div>

                <!-- Nueva sección de patrocinadores -->
                <div class="sponsors-section">
                    <h3 class="section-title">Nuestros Patrocinadores</h3>
                    <p class="sponsors-intro">Estas empresas apoyan nuestros esfuerzos para crear un futuro más sostenible.</p>
                    <div class="sponsors-grid">
                        <!-- Patrocinador 1: Lego -->
                        <div class="sponsor-item">
                            <div class="sponsor-logo">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/2/24/LEGO_logo.svg" alt="Lego">
                            </div>
                            <div class="sponsor-info">
                                <h4>Lego</h4>
                                <p>Comprometidos con la sostenibilidad y la creación de juguetes ecológicos para las futuras generaciones.</p>
                                <span class="sponsor-level platinum">Patrocinador Platino</span>
                            </div>
                        </div>

                        <!-- Patrocinador 2: Adidas -->
                        <div class="sponsor-item">
                            <div class="sponsor-logo">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/2/20/Adidas_Logo.svg" alt="Adidas">
                            </div>
                            <div class="sponsor-info">
                                <h4>Adidas</h4>
                                <p>Innovando en materiales reciclados y prácticas sostenibles en la industria de la moda deportiva.</p>
                                <span class="sponsor-level gold">Patrocinador Oro</span>
                            </div>
                        </div>

                        <!-- Patrocinador 3: Microsoft -->
                        <div class="sponsor-item">
                            <div class="sponsor-logo">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/4/44/Microsoft_logo.svg" alt="Microsoft">
                            </div>
                            <div class="sponsor-info">
                                <h4>Microsoft</h4>
                                <p>Liderando iniciativas de tecnología verde y comprometidos con la neutralidad de carbono.</p>
                                <span class="sponsor-level gold">Patrocinador Oro</span>
                            </div>
                        </div>
                    </div>
                </div>

                <button class="start-button" onclick="mostrarFormularioRegistro()">
                    Comienza tu viaje verde
                </button>
            </div>
        </div>

        <!-- Formulario de registro -->
        <main id="registro" class="auth-container">
            <h2 class="card-title">Crear Usuario</h2>
            <div class="form-group">
                <label for="correo">Correo Electrónico Institucional</label>
                <div class="email-input-group">
                    <input type="email" id="correo" 
                           placeholder="ejemplo@cecyteqroo.edu.mx" 
                           required 
                           pattern="[a-zA-Z0-9._%+-]+@(cecyteqroo\.edu\.mx|cancun\.tecnm\.mx)$">
                    <div class="email-validation-message" id="emailValidationMessage"></div>
                </div>
            </div>
            <div class="form-group">
                <label for="nombre">Nombre</label>
                <input type="text" id="nombre" placeholder="Tu nombre completo" required>
            </div>
            <div class="form-group">
                <label for="matricula">Matrícula</label>
                <input type="text" id="matricula" placeholder="Tu número de matrícula" required>
            </div>
            <div class="form-group">
                <label for="materia">Materia</label>
                <input type="text" id="materia" placeholder="Nombre de la materia" required>
            </div>
            <div class="form-group">
                <label for="semestre">Semestre</label>
                <input type="number" id="semestre" placeholder="Número de semestre" min="1" max="12" required>
            </div>
            <div class="form-group">
                <label for="grupo">Grupo</label>
                <input type="text" id="grupo" placeholder="Letra o número de grupo" required>
            </div>
            <div class="form-group">
                <label for="clave">Contraseña</label>
                <input type="password" id="clave" placeholder="••••••••" required>
            </div>
            <button class="btn btn-primary" onclick="crearUsuario()">
                <i class="fas fa-user-plus"></i>
                Crear Usuario
            </button>
            <p class="login-register-toggle" onclick="mostrarFormularioLogin()">
                ¿Ya tienes cuenta? <span style="color: var(--primary-color); cursor: pointer;">Inicia sesión</span>
            </p>
        </main>

        <!-- Formulario de inicio de sesión -->
        <main id="login" class="auth-container">
            <h2 class="card-title">Iniciar Sesión</h2>
            <div class="login-options">
                <button class="login-option active" onclick="cambiarMetodoLogin('correo')">
                    <i class="fas fa-envelope"></i> Correo
                </button>
                <button class="login-option" onclick="cambiarMetodoLogin('matricula')">
                    <i class="fas fa-id-card"></i> Matrícula
                </button>
            </div>
            <div class="form-group" id="correoLoginGroup">
                <label for="correoLogin">Correo Electrónico</label>
                <input type="email" id="correoLogin" placeholder="tu@email.com" required>
            </div>
            <div class="form-group" id="matriculaLoginGroup" style="display: none;">
                <label for="matriculaLogin">Matrícula</label>
                <input type="text" id="matriculaLogin" placeholder="Tu número de matrícula" required>
            </div>
            <div class="form-group">
                <label for="claveLogin">Contraseña</label>
                <input type="password" id="claveLogin" placeholder="••••••••" required>
            </div>
            <button class="btn btn-primary" onclick="iniciarSesion()">
                <i class="fas fa-sign-in-alt"></i>
                Iniciar Sesión
            </button>
            <p class="forgot-password-toggle" onclick="mostrarFormularioRecuperacionClave()">
                ¿Olvidaste tu contraseña? <span style="color: var(--secondary-color); cursor: pointer;">Recupérala aquí</span>
            </p>
            <p class="login-register-toggle" onclick="mostrarFormularioRegistro()">
                ¿No tienes cuenta? <span style="color: var(--primary-color); cursor: pointer;">Regístrate</span>
            </p>
        </main>

        <!-- Dashboard principal modificado -->
        <main id="app">
            <div id="progreso" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Tu Progreso</h2>
                        <span class="badge" id="nivel-badge">Nivel 1</span>
                    </div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 45%"></div>
                        </div>
                        <p style="text-align: right; font-size: 0.875rem; color: #64748b;">45/100 puntos</p>
                    </div>
                    <div style="display: flex; justify-content: space-around; margin-top: 1rem;">
                        <div style="text-align: center">
                            <i class="fas fa-trophy" style="color: #fbbf24; font-size: 2rem;"></i>
                            <p style="font-size: 0.875rem; margin-top: 0.5rem;">3 Logros</p>
                        </div>
                        <div style="text-align: center">
                            <i class="fas fa-medal" style="color: #60a5fa; font-size: 2rem;"></i>
                            <p style="font-size: 0.875rem; margin-top: 0.5rem;">5 Insignias</p>
                        </div>
                        <div style="text-align: center">
                            <i class="fas fa-star" style="color: #f59e0b; font-size: 2rem;"></i>
                            <p style="font-size: 0.875rem; margin-top: 0.5rem;">2 Premios</p>
                        </div>
                    </div>
                </div>
            </div>

            <div id="desafios" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Desafíos Activos</h2>
                        <div class="challenge-filter">
                            <select id="filter-challenge" onchange="filtrarDesafios()">
                                <option value="todos">Todos los desafíos</option>
                                <option value="facil">Dificultad: Fácil</option>
                                <option value="medio">Dificultad: Medio</option>
                                <option value="dificil">Dificultad: Difícil</option>
                            </select>
                        </div>
                    </div>
                    <div class="challenges-grid">
                        <div class="challenge-card" data-difficulty="facil">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Mes del Termo y Topper</h3>
                                <span class="challenge-status">28 Jun - 19 Jul</span>
                            </div>
                            <div class="challenge-badges">
                                <span class="challenge-badge easy">Fácil</span>
                                <span class="challenge-badge points">100 puntos</span>
                            </div>
                            <p style="margin-bottom: 1rem; color: #64748b;">Trae tu termo y topper para reducir el uso de desechables durante el mes.</p>
                            <div class="challenge-actions">
                                <button class="btn btn-secondary" onclick="mostrarPDF('termo-topper')">
                                    <i class="fas fa-file-pdf"></i> Ver Información
                                </button>
                                <div class="file-upload">
                                    <label class="file-upload-label" for="evidence1">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        Subir Evidencia
                                    </label>
                                    <input type="file" id="evidence1" onchange="subirEvidencia(1)">
                                </div>
                            </div>
                            <button class="btn btn-primary complete-task-btn" id="completeTask1" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(1)">
                                <i class="fas fa-check-circle"></i> Marcar como Completado
                            </button>
                        </div>

                        <div class="challenge-card" data-difficulty="facil">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Bolsa Ecológica</h3>
                                <span class="challenge-status">Diario</span>
                            </div>
                            <div class="challenge-badges">
                                <span class="challenge-badge easy">Fácil</span>
                                <span class="challenge-badge points">50 puntos</span>
                            </div>
                            <p style="margin-bottom: 1rem; color: #64748b;">Lleva tu bolsa ecológica para tus compras y evita el uso de bolsas plásticas.</p>
                            <div class="challenge-actions">
                                <button class="btn btn-secondary" onclick="mostrarPDF('bolsa-ecologica')">
                                    <i class="fas fa-file-pdf"></i> Ver Información
                                </button>
                                <div class="file-upload">
                                    <label class="file-upload-label" for="evidence2">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        Subir Evidencia
                                    </label>
                                    <input type="file" id="evidence2" onchange="subirEvidencia(2)">
                                </div>
                            </div>
                            <button class="btn btn-primary complete-task-btn" id="completeTask2" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(2)">
                                <i class="fas fa-check-circle"></i> Marcar como Completado
                            </button>
                        </div>

                        <div class="challenge-card" data-difficulty="medio">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Trueque de Prendas</h3>
                                <span class="challenge-status">Semanal</span>
                            </div>
                            <div class="challenge-badges">
                                <span class="challenge-badge medium">Medio</span>
                                <span class="challenge-badge points">150 puntos</span>
                            </div>
                            <p style="margin-bottom: 1rem; color: #64748b;">Participa en el trueque de prendas limpias y en buen estado para darles una segunda vida.</p>
                            <div class="challenge-actions">
                                <button class="btn btn-secondary" onclick="mostrarPDF('trueque-prendas')">
                                    <i class="fas fa-file-pdf"></i> Ver Información
                                </button>
                                <div class="file-upload">
                                    <label class="file-upload-label" for="evidence3">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        Subir Evidencia
                                    </label>
                                    <input type="file" id="evidence3" onchange="subirEvidencia(3)">
                                </div>
                            </div>
                            <button class="btn btn-primary complete-task-btn" id="completeTask3" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(3)">
                                <i class="fas fa-check-circle"></i> Marcar como Completado
                            </button>
                        </div>

                        <div class="challenge-card" data-difficulty="facil">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Ahorro de Agua</h3>
                                <span class="challenge-status">Permanente</span>
                            </div>
                            <div class="challenge-badges">
                                <span class="challenge-badge easy">Fácil</span>
                                <span class="challenge-badge points">75 puntos</span>
                            </div>
                            <p style="margin-bottom: 1rem; color: #64748b;">Coloca una botella de agua en la caja del inodoro para reducir el consumo de agua.</p>
                            <div class="challenge-actions">
                                <button class="btn btn-secondary" onclick="mostrarPDF('ahorro-agua')">
                                    <i class="fas fa-file-pdf"></i> Ver Información
                                </button>
                                <div class="file-upload">
                                    <label class="file-upload-label" for="evidence4">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        Subir Evidencia
                                    </label>
                                    <input type="file" id="evidence4" onchange="subirEvidencia(4)">
                                </div>
                            </div>
                            <button class="btn btn-primary complete-task-btn" id="completeTask4" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(4)">
                                <i class="fas fa-check-circle"></i> Marcar como Completado
                            </button>
                        </div>

                        <div class="challenge-card" data-difficulty="medio">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Recolección de PET</h3>
                                <span class="challenge-status">Semanal</span>
                            </div>
                            <div class="challenge-badges">
                                <span class="challenge-badge medium">Medio</span>
                                <span class="challenge-badge points">100 puntos</span>
                            </div>
                            <p style="margin-bottom: 1rem; color: #64748b;">Participa en la recolección de botellas PET para su reciclaje.</p>
                            <div class="challenge-actions">
                                <button class="btn btn-secondary" onclick="mostrarPDF('recoleccion-pet')">
                                    <i class="fas fa-file-pdf"></i> Ver Información
                                </button>
                                <div class="file-upload">
                                    <label class="file-upload-label" for="evidence5">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        Subir Evidencia
                                    </label>
                                    <input type="file" id="evidence5" onchange="subirEvidencia(5)">
                                </div>
                            </div>
                            <button class="btn btn-primary complete-task-btn" id="completeTask5" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(5)">
                                <i class="fas fa-check-circle"></i> Marcar como Completado
                            </button>
                        </div>

                        <div class="challenge-card" data-difficulty="facil">
                            <div class="challenge-header">
                                <h3 class="challenge-title">Recolección de Tapitas</h3>
                                <span class="challenge-status">Semanal</span>
                            </div>
                            <div class="challenge-badges">
                                <span class="challenge-badge easy">Fácil</span>
                                <span class="challenge-badge points">50 puntos</span>
                            </div>
                            <p style="margin-bottom: 1rem; color: #64748b;">Recolecta tapitas de plástico para apoyar causas benéficas y el reciclaje.</p>
                            <div class="challenge-actions">
                                <button class="btn btn-secondary" onclick="mostrarPDF('recoleccion-tapitas')">
                                    <i class="fas fa-file-pdf"></i> Ver Información
                                </button>
                                <div class="file-upload">
                                    <label class="file-upload-label" for="evidence6">
                                        <i class="fas fa-cloud-upload-alt"></i>
                                        Subir Evidencia
                                    </label>
                                    <input type="file" id="evidence6" onchange="subirEvidencia(6)">
                                </div>
                            </div>
                            <button class="btn btn-primary complete-task-btn" id="completeTask6" style="display: none; margin-top: 1rem; width: 100%;" onclick="completarDesafio(6)">
                                <i class="fas fa-check-circle"></i> Marcar como Completado
                            </button>
                        </div>
                    </div>

                    <style>
                        .challenge-actions {
                            display: flex;
                            flex-direction: column;
                            gap: 1rem;
                            margin-bottom: 1rem;
                        }

                        .challenge-actions .btn {
                            width: 100%;
                        }

                        .pdf-modal {
                            display: none;
                            position: fixed;
                            top: 0;
                            left: 0;
                            width: 100%;
                            height: 100%;
                            background: rgba(0, 0, 0, 0.5);
                            z-index: 1000;
                        }

                        .pdf-modal-content {
                            position: relative;
                            background: white;
                            margin: 5% auto;
                            padding: 20px;
                            width: 80%;
                            max-width: 800px;
                            border-radius: 12px;
                            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
                        }

                        .pdf-modal-header {
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            margin-bottom: 1rem;
                        }

                        .pdf-modal-close {
                            background: none;
                            border: none;
                            font-size: 1.5rem;
                            cursor: pointer;
                            color: #666;
                        }

                        .pdf-container {
                            width: 100%;
                            height: 70vh;
                            border: none;
                        }
                    </style>

                    <!-- Modal para PDF -->
                    <div id="pdfModal" class="pdf-modal">
                        <div class="pdf-modal-content">
                            <div class="pdf-modal-header">
                                <h3 id="pdfTitle">Información del Desafío</h3>
                                <button class="pdf-modal-close" onclick="cerrarPDF()">&times;</button>
                            </div>
                            <iframe id="pdfViewer" class="pdf-container" src="" frameborder="0"></iframe>
                        </div>
                    </div>

                    <script>
                        function mostrarPDF(desafio) {
                            const modal = document.getElementById('pdfModal');
                            const viewer = document.getElementById('pdfViewer');
                            const title = document.getElementById('pdfTitle');
                            
                            // Aquí deberías tener las URLs de tus PDFs
                            const pdfUrls = {
                                'termo-topper': 'pdfs/termo-topper.pdf',
                                'bolsa-ecologica': 'pdfs/bolsa-ecologica.pdf',
                                'trueque-prendas': 'pdfs/trueque-prendas.pdf',
                                'ahorro-agua': 'pdfs/ahorro-agua.pdf',
                                'recoleccion-pet': 'pdfs/recoleccion-pet.pdf',
                                'recoleccion-tapitas': 'pdfs/recoleccion-tapitas.pdf'
                            };

                            // Actualizar título y PDF
                            title.textContent = `Información: ${document.querySelector(`[onclick="mostrarPDF('${desafio}')"]`).closest('.challenge-card').querySelector('.challenge-title').textContent}`;
                            viewer.src = pdfUrls[desafio];
                            
                            modal.style.display = 'block';
                        }

                        function cerrarPDF() {
                            const modal = document.getElementById('pdfModal');
                            const viewer = document.getElementById('pdfViewer');
                            
                            modal.style.display = 'none';
                            viewer.src = '';
                        }

                        // Cerrar modal al hacer clic fuera
                        window.onclick = function(event) {
                            const modal = document.getElementById('pdfModal');
                            if (event.target == modal) {
                                cerrarPDF();
                            }
                        }
                    </script>
                </div>
            </div>

            <div id="recompensas" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Recompensas</h2>
                        <span class="total-credits">Créditos disponibles: <span id="user-credits">350</span></span>
                    </div>
                    <div class="rewards-list">
                        <div class="reward-item">
                            <i class="fas fa-award reward-icon"></i>
                            <div class="reward-info">
                                <h4 class="reward-title">Insignia de Bronce</h4>
                                <p class="reward-description">Completa 3 desafíos</p>
                            </div>
                        </div>
                        <div class="reward-item">
                            <i class="fas fa-medal reward-icon"></i>
                            <div class="reward-info">
                                <h4 class="reward-title">Insignia de Plata</h4>
                                <p class="reward-description">Planta 10 árboles</p>
                            </div>
                        </div>
                        <div class="reward-item">
                            <i class="fas fa-crown reward-icon"></i>
                            <div class="reward-info">
                                <h4 class="reward-title">Insignia de Oro</h4>
                                <p class="reward-description">Alcanza 1000 puntos</p>
                            </div>
                        </div>
                    </div>

                    <!-- Sección de Cupones -->
                    <div class="coupon-section">
                        <div class="section-header">
                            <h3 class="card-title">Liberación de Horas de Servicio Social</h3>
                            <p class="section-description">Canjea tus puntos por horas de servicio social liberadas</p>
                        </div>
                        
                        <div class="service-hours-grid">
                            <div class="service-hours-card">
                                <div class="hours-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="hours-info">
                                    <h4>10 Horas</h4>
                                    <p>Liberación de 10 horas de servicio social</p>
                                    <div class="points-required">
                                        <i class="fas fa-star"></i>
                                        <span>500 puntos</span>
                                    </div>
                                </div>
                                <button class="btn btn-primary" onclick="canjearHoras(10, 500)">
                                    Canjear
                                </button>
                            </div>

                            <div class="service-hours-card">
                                <div class="hours-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="hours-info">
                                    <h4>20 Horas</h4>
                                    <p>Liberación de 20 horas de servicio social</p>
                                    <div class="points-required">
                                        <i class="fas fa-star"></i>
                                        <span>900 puntos</span>
                                    </div>
                                </div>
                                <button class="btn btn-primary" onclick="canjearHoras(20, 900)">
                                    Canjear
                                </button>
                            </div>

                            <div class="service-hours-card">
                                <div class="hours-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="hours-info">
                                    <h4>30 Horas</h4>
                                    <p>Liberación de 30 horas de servicio social</p>
                                    <div class="points-required">
                                        <i class="fas fa-star"></i>
                                        <span>1300 puntos</span>
                                    </div>
                                </div>
                                <button class="btn btn-primary" onclick="canjearHoras(30, 1300)">
                                    Canjear
                                </button>
                            </div>

                            <div class="service-hours-card">
                                <div class="hours-icon">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="hours-info">
                                    <h4>40 Horas</h4>
                                    <p>Liberación de 40 horas de servicio social</p>
                                    <div class="points-required">
                                        <i class="fas fa-star"></i>
                                        <span>1600 puntos</span>
                                    </div>
                                </div>
                                <button class="btn btn-primary" onclick="canjearHoras(40, 1600)">
                                    Canjear
                                </button>
                            </div>
                        </div>

                        <div class="hours-progress">
                            <h4>Tu Progreso de Horas Liberadas</h4>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="hoursProgress" style="width: 0%"></div>
                                </div>
                                <p class="progress-text">Horas liberadas: <span id="liberatedHours">0</span> de 40</p>
                            </div>
                        </div>

                        <div class="hours-history">
                            <h4>Historial de Liberaciones</h4>
                            <div class="history-list" id="hoursHistory">
                                <!-- El historial se cargará dinámicamente -->
                            </div>
                        </div>
                    </div>

                    <style>
                        .service-hours-grid {
                            display: grid;
                            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
                            gap: 1.5rem;
                            margin: 2rem 0;
                        }

                        .service-hours-card {
                            background: white;
                            border-radius: 12px;
                            padding: 1.5rem;
                            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                            display: flex;
                            flex-direction: column;
                            align-items: center;
                            text-align: center;
                            transition: transform 0.3s ease;
                        }

                        .service-hours-card:hover {
                            transform: translateY(-5px);
                        }

                        .hours-icon {
                            font-size: 2rem;
                            color: var(--primary-color);
                            margin-bottom: 1rem;
                        }

                        .hours-info {
                            margin-bottom: 1.5rem;
                        }

                        .hours-info h4 {
                            color: var(--primary-color);
                            margin-bottom: 0.5rem;
                        }

                        .points-required {
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            gap: 0.5rem;
                            color: #f59e0b;
                            font-weight: 500;
                            margin-top: 0.5rem;
                        }

                        .hours-progress {
                            background: white;
                            border-radius: 12px;
                            padding: 1.5rem;
                            margin: 2rem 0;
                            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                        }

                        .hours-history {
                            background: white;
                            border-radius: 12px;
                            padding: 1.5rem;
                            margin-top: 2rem;
                            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                        }

                        .history-list {
                            margin-top: 1rem;
                        }

                        .history-item {
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            padding: 1rem;
                            border-bottom: 1px solid #e5e7eb;
                        }

                        .history-item:last-child {
                            border-bottom: none;
                        }

                        .history-date {
                            color: #6b7280;
                            font-size: 0.875rem;
                        }
                    </style>

                    <script>
                        function canjearHoras(horas, puntos) {
                            const userPoints = parseInt(document.getElementById('user-credits').textContent);
                            if (userPoints >= puntos) {
                                // Actualizar puntos
                                document.getElementById('user-credits').textContent = userPoints - puntos;
                                
                                // Actualizar horas liberadas
                                const liberatedHours = parseInt(document.getElementById('liberatedHours').textContent);
                                document.getElementById('liberatedHours').textContent = liberatedHours + horas;
                                
                                // Actualizar barra de progreso
                                const progress = ((liberatedHours + horas) / 40) * 100;
                                document.getElementById('hoursProgress').style.width = `${progress}%`;
                                
                                // Agregar al historial
                                const historyList = document.getElementById('hoursHistory');
                                const historyItem = document.createElement('div');
                                historyItem.className = 'history-item';
                                historyItem.innerHTML = `
                                    <div>
                                        <strong>${horas} horas liberadas</strong>
                                        <div class="history-date">${new Date().toLocaleDateString()}</div>
                                    </div>
                                    <div>-${puntos} puntos</div>
                                `;
                                historyList.insertBefore(historyItem, historyList.firstChild);
                                
                                alert(`¡Felicidades! Has liberado ${horas} horas de servicio social.`);
                            } else {
                                alert('No tienes suficientes puntos para canjear estas horas.');
                            }
                        }
                    </script>

                    <!-- Nueva sección de Créditos Complementarios -->
                    <div class="credit-section">
                        <h3 class="card-title">Canjear Puntos de Calificación</h3>
                        <p class="section-description">Tus puntos pueden ser canjeados por puntos adicionales en tu calificación final.</p>

                        <div class="credit-options">
                            <div class="credit-card">
                                <div class="credit-icon"><i class="fas fa-star"></i></div>
                                <div class="credit-info">
                                    <h4>1 Punto Extra</h4>
                                    <p>Agrega 1 punto a tu calificación final</p>
                                </div>
                                <div class="credit-action">
                                    <span class="credit-cost">800 puntos</span>
                                    <button class="btn-credit" onclick="canjearPuntosCalificacion(1, 800)">Canjear</button>
                                </div>
                            </div>

                            <div class="credit-card">
                                <div class="credit-icon"><i class="fas fa-star"></i></div>
                                <div class="credit-info">
                                    <h4>2 Puntos Extra</h4>
                                    <p>Agrega 2 puntos a tu calificación final</p>
                                </div>
                                <div class="credit-action">
                                    <span class="credit-cost">1500 puntos</span>
                                    <button class="btn-credit" onclick="canjearPuntosCalificacion(2, 1500)">Canjear</button>
                                </div>
                            </div>

                            <div class="credit-card">
                                <div class="credit-icon"><i class="fas fa-star"></i></div>
                                <div class="credit-info">
                                    <h4>3 Puntos Extra</h4>
                                    <p>Agrega 3 puntos a tu calificación final</p>
                                </div>
                                <div class="credit-action">
                                    <span class="credit-cost">2000 puntos</span>
                                    <button class="btn-credit" onclick="canjearPuntosCalificacion(3, 2000)">Canjear</button>
                                </div>
                            </div>
                        </div>

                        <div class="calificacion-progress">
                            <h4>Tu Progreso de Puntos de Calificación</h4>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" id="calificacionProgress" style="width: 0%"></div>
                                </div>
                                <p class="progress-text">Puntos acumulados: <span id="puntosCalificacion">0</span> de 3</p>
                            </div>
                        </div>

                        <div class="calificacion-history">
                            <h4>Historial de Canjes</h4>
                            <div class="history-list" id="calificacionHistory">
                                <!-- El historial se cargará dinámicamente -->
                            </div>
                        </div>

                        <style>
                            .credit-options {
                                display: grid;
                                grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
                                gap: 1.5rem;
                                margin: 2rem 0;
                            }

                            .credit-card {
                                background: white;
                                border-radius: 12px;
                                padding: 1.5rem;
                                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                                display: flex;
                                flex-direction: column;
                                align-items: center;
                                text-align: center;
                                transition: transform 0.3s ease;
                            }

                            .credit-card:hover {
                                transform: translateY(-5px);
                            }

                            .credit-icon {
                                font-size: 2.5rem;
                                color: #f59e0b;
                                margin-bottom: 1rem;
                            }

                            .credit-info {
                                margin-bottom: 1.5rem;
                            }

                            .credit-info h4 {
                                color: var(--primary-color);
                                margin-bottom: 0.5rem;
                            }

                            .credit-action {
                                display: flex;
                                flex-direction: column;
                                align-items: center;
                                gap: 1rem;
                                width: 100%;
                            }

                            .credit-cost {
                                color: #f59e0b;
                                font-weight: 600;
                                font-size: 1.1rem;
                            }

                            .btn-credit {
                                background: var(--primary-color);
                                color: white;
                                border: none;
                                padding: 0.75rem 1.5rem;
                                border-radius: 8px;
                                cursor: pointer;
                                font-weight: 500;
                                transition: background-color 0.3s ease;
                                width: 100%;
                            }

                            .btn-credit:hover {
                                background: var(--primary-color-dark);
                            }

                            .calificacion-progress {
                                background: white;
                                border-radius: 12px;
                                padding: 1.5rem;
                                margin: 2rem 0;
                                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                            }

                            .calificacion-history {
                                background: white;
                                border-radius: 12px;
                                padding: 1.5rem;
                                margin-top: 2rem;
                                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
                            }
                        </style>

                        <script>
                            function canjearPuntosCalificacion(puntos, costo) {
                                const userPoints = parseInt(document.getElementById('user-credits').textContent);
                                const puntosActuales = parseInt(document.getElementById('puntosCalificacion').textContent);
                                
                                if (userPoints >= costo && puntosActuales + puntos <= 3) {
                                    // Actualizar puntos
                                    document.getElementById('user-credits').textContent = userPoints - costo;
                                    
                                    // Actualizar puntos de calificación
                                    document.getElementById('puntosCalificacion').textContent = puntosActuales + puntos;
                                    
                                    // Actualizar barra de progreso
                                    const progress = ((puntosActuales + puntos) / 3) * 100;
                                    document.getElementById('calificacionProgress').style.width = `${progress}%`;
                                    
                                    // Agregar al historial
                                    const historyList = document.getElementById('calificacionHistory');
                                    const historyItem = document.createElement('div');
                                    historyItem.className = 'history-item';
                                    historyItem.innerHTML = `
                                        <div>
                                            <strong>${puntos} punto(s) extra</strong>
                                            <div class="history-date">${new Date().toLocaleDateString()}</div>
                                        </div>
                                        <div>-${costo} puntos</div>
                                    `;
                                    historyList.insertBefore(historyItem, historyList.firstChild);
                                    
                                    alert(`¡Felicidades! Has canjeado ${puntos} punto(s) extra para tu calificación final.`);
                                } else if (puntosActuales + puntos > 3) {
                                    alert('No puedes canjear más de 3 puntos en total.');
                                } else {
                                    alert('No tienes suficientes puntos para realizar este canje.');
                                }
                            }
                        </script>
                    </div>

                    <!-- Sección de administración de cupones (solo visible para administradores) -->
                    <div id="admin-cupones" class="admin-section" style="display: none;">
                        <h3 class="card-title">Administrar Cupones</h3>
                        <form id="formCupon" onsubmit="agregarCupon(event)">
                            <div class="form-group">
                                <label for="cuponTitulo">Título del Cupón</label>
                                <input type="text" id="cuponTitulo" required placeholder="ej. 20% de descuento en...">
                            </div>
                            <div class="form-group">
                                <label for="cuponCodigo">Código</label>
                                <input type="text" id="cuponCodigo" required placeholder="ej. ECO2024">
                            </div>
                            <div class="form-group">
                                <label for="cuponPuntos">Puntos Requeridos</label>
                                <input type="number" id="cuponPuntos" required min="0">
                            </div>
                            <div class="form-group">
                                <label for="cuponTienda">Tienda</label>
                                <select id="cuponTienda" required>
                                    <option value="">Seleccionar tienda</option>
                                    <option value="H&M">H&M</option>
                                    <option value="Zara">Zara</option>
                                    <option value="Walmart">Walmart</option>
                                    <option value="Adidas">Adidas</option>
                                    <option value="Whole Foods">Whole Foods</option>
                                    <option value="Starbucks">Starbucks</option>
                                    <option value="The Body Shop">The Body Shop</option>
                                    <option value="Patagonia">Patagonia</option>
                                    <option value="Econnect">Econnect (Genérico)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="cuponExpiracion">Fecha de Expiración</label>
                                <input type="date" id="cuponExpiracion" required>
                            </div>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-plus"></i>
                                Agregar Cupón
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Nueva sección de Videos Educativos -->
            <div id="videos" class="dashboard-section">
                <div class="card">
                    <div class="card-header">
                        <h2 class="card-title">Videos Educativos</h2>
                    </div>

                    <div class="video-filters">
                        <button class="video-filter active" onclick="filtrarVideos('todos')">Todos</button>
                        <button class="video-filter" onclick="filtrarVideos('reciclaje')">Reciclaje</button>
                        <button class="video-filter" onclick="filtrarVideos('agua')">Agua</button>
                        <button class="video-filter" onclick="filtrarVideos('energia')">Energía</button>
                        <button class="video-filter" onclick="filtrarVideos('biodiversidad')">Biodiversidad</button>
                    </div>

                    <div class="videos-grid">
                        <!-- Video 1 -->
                        <div class="video-card" data-category="reciclaje">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/FkOXW0UHxPw/maxresdefault.jpg" alt="Reciclaje Creativo">
                                <div class="video-play-button" onclick="abrirVideo('FkOXW0UHxPw', 'Cómo reciclar correctamente en casa', 'Aprende a separar correctamente los desechos, identificar materiales reciclables y crear un sistema de reciclaje efectivo en tu hogar.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Cómo reciclar correctamente en casa</h3>
                                <p class="video-description">Aprende a separar correctamente los desechos, identificar materiales reciclables y crear un sistema de reciclaje efectivo en tu hogar.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>7:45</span>
                                    </div>
                                    <span class="video-category reciclaje">Reciclaje</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video 2 -->
                        <div class="video-card" data-category="agua">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/S1cAGQDIAQ4/maxresdefault.jpg" alt="Conservación del agua">
                                <div class="video-play-button" onclick="abrirVideo('S1cAGQDIAQ4', 'Consejos para ahorrar agua en el hogar', 'Descubre técnicas simples pero efectivas para reducir el consumo de agua en tu vida diaria y contribuir a la conservación de este recurso vital.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Consejos para ahorrar agua en el hogar</h3>
                                <p class="video-description">Descubre técnicas simples pero efectivas para reducir el consumo de agua en tu vida diaria y contribuir a la conservación de este recurso vital.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>5:20</span>
                                    </div>
                                    <span class="video-category agua">Agua</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video 3 -->
                        <div class="video-card" data-category="energia">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/X6HDcubgxRk/maxresdefault.jpg" alt="Energías renovables">
                                <div class="video-play-button" onclick="abrirVideo('X6HDcubgxRk', 'Introducción a las energías renovables', 'Este video explica los diferentes tipos de energías renovables, cómo funcionan y por qué son fundamentales para combatir el cambio climático.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Introducción a las energías renovables</h3>
                                <p class="video-description">Este video explica los diferentes tipos de energías renovables, cómo funcionan y por qué son fundamentales para combatir el cambio climático.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>8:15</span>
                                    </div>
                                    <span class="video-category energia">Energía</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video 4 -->
                        <div class="video-card" data-category="reciclaje">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/iBOxCDcMpGc/maxresdefault.jpg" alt="Upcycling">
                                <div class="video-play-button" onclick="abrirVideo('iBOxCDcMpGc', 'Upcycling: transformando residuos en tesoros', 'Aprende a reutilizar materiales de desecho para crear objetos útiles y decorativos, reduciendo la basura y dando nueva vida a lo que ibas a tirar.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Upcycling: transformando residuos en tesoros</h3>
                                <p class="video-description">Aprende a reutilizar materiales de desecho para crear objetos útiles y decorativos, reduciendo la basura y dando nueva vida a lo que ibas a tirar.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>10:30</span>
                                    </div>
                                    <span class="video-category reciclaje">Reciclaje</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video 5 -->
                        <div class="video-card" data-category="biodiversidad">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/q5ngTJz8-mU/maxresdefault.jpg" alt="Biodiversidad">
                                <div class="video-play-button" onclick="abrirVideo('q5ngTJz8-mU', 'La importancia de la biodiversidad', 'Descubre por qué la biodiversidad es crucial para la salud del planeta y cómo podemos contribuir a su conservación desde nuestra vida cotidiana.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">La importancia de la biodiversidad</h3>
                                <p class="video-description">Descubre por qué la biodiversidad es crucial para la salud del planeta y cómo podemos contribuir a su conservación desde nuestra vida cotidiana.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>6:45</span>
                                    </div>
                                    <span class="video-category biodiversidad">Biodiversidad</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video 6 -->
                        <div class="video-card" data-category="agua">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/GcXE5-4HvmU/maxresdefault.jpg" alt="Crisis hídrica">
                                <div class="video-play-button" onclick="abrirVideo('GcXE5-4HvmU', 'La crisis hídrica global: causas y soluciones', 'Un análisis profundo sobre la escasez de agua en el planeta, sus causas y las posibles soluciones para enfrentar uno de los mayores desafíos ambientales.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">La crisis hídrica global: causas y soluciones</h3>
                                <p class="video-description">Un análisis profundo sobre la escasez de agua en el planeta, sus causas y las posibles soluciones para enfrentar uno de los mayores desafíos ambientales.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>12:10</span>
                                    </div>
                                    <span class="video-category agua">Agua</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video 7 -->
                        <div class="video-card" data-category="energia">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/1kUE0BZtTRc/maxresdefault.jpg" alt="Ahorro energético">
                                <div class="video-play-button" onclick="abrirVideo('1kUE0BZtTRc', 'Cómo reducir tu consumo energético diario', 'Estrategias prácticas para disminuir el consumo de energía en casa, ahorrar dinero y reducir tu huella de carbono con cambios simples en tus hábitos cotidianos.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Cómo reducir tu consumo energético diario</h3>
                                <p class="video-description">Estrategias prácticas para disminuir el consumo de energía en casa, ahorrar dinero y reducir tu huella de carbono con cambios simples en tus hábitos cotidianos.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>9:25</span>
                                    </div>
                                    <span class="video-category energia">Energía</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video 8 -->
                        <div class="video-card" data-category="reciclaje">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/fwrlr7tXYQM/maxresdefault.jpg" alt="Economía circular">
                                <div class="video-play-button" onclick="abrirVideo('fwrlr7tXYQM', 'Economía circular: un nuevo modelo de producción y consumo', 'Conoce cómo la economía circular propone un sistema donde los residuos se convierten en recursos, minimizando el impacto ambiental y maximizando la eficiencia.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Economía circular: un nuevo modelo de producción y consumo</h3>
                                <p class="video-description">Conoce cómo la economía circular propone un sistema donde los residuos se convierten en recursos, minimizando el impacto ambiental y maximizando la eficiencia.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>11:40</span>
                                    </div>
                                    <span class="video-category reciclaje">Reciclaje</span>
                                </div>
                            </div>
                        </div>

                        <!-- Video 9 -->
                        <div class="video-card" data-category="biodiversidad">
                            <div class="video-thumbnail">
                                <img src="https://img.youtube.com/vi/X-iJxM5v6t0/maxresdefault.jpg" alt="Especies en peligro">
                                <div class="video-play-button" onclick="abrirVideo('X-iJxM5v6t0', 'Especies en peligro de extinción: una cuenta regresiva', 'Un recorrido por las principales especies amenazadas del planeta, las causas de su disminución y las acciones de conservación más urgentes.')">
                                    <i class="fas fa-play"></i>
                                </div>
                            </div>
                            <div class="video-info">
                                <h3 class="video-title">Especies en peligro de extinción: una cuenta regresiva</h3>
                                <p class="video-description">Un recorrido por las principales especies amenazadas del planeta, las causas de su disminución y las acciones de conservación más urgentes.</p>
                                <div class="video-meta">
                                    <div class="video-duration">
                                        <i class="fas fa-clock"></i>
                                        <span>14:15</span>
                                    </div>
                                    <span class="video-category biodiversidad">Biodiversidad</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Formulario de Perfil -->
        <div id="perfil" class="section" style="display: none;">
            <div class="profile-container">
                <div class="profile-header">
                    <h2>Mi Perfil</h2>
                    <button class="btn btn-secondary" onclick="editarPerfil()">
                        <i class="fas fa-edit"></i> Editar Perfil
                    </button>
                </div>
                
                <div class="profile-content">
                    <div class="profile-info">
                        <div class="profile-avatar">
                            <i class="fas fa-user-circle"></i>
                        </div>
                        <div class="profile-details">
                            <h3 id="profileName">Nombre del Usuario</h3>
                            <p id="profileEmail">correo@ejemplo.com</p>
                            <p id="profilePoints">Puntos: 0</p>
                        </div>
                    </div>

                    <div class="profile-stats">
                        <div class="stat-card">
                            <i class="fas fa-trophy"></i>
                            <h4>Desafíos Completados</h4>
                            <p id="completedChallenges">0</p>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-leaf"></i>
                            <h4>Impacto Ambiental</h4>
                            <p id="environmentalImpact">0 kg CO₂</p>
                        </div>
                        <div class="stat-card">
                            <i class="fas fa-star"></i>
                            <h4>Nivel</h4>
                            <p id="userLevel">Principiante</p>
                        </div>
                    </div>

                    <div class="profile-achievements">
                        <h3>Logros</h3>
                        <div class="achievements-grid" id="achievementsGrid">
                            <!-- Los logros se cargarán dinámicamente -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Formulario de Edición de Perfil -->
            <div id="editProfileForm" class="profile-container" style="display: none;">
                <div class="profile-header">
                    <h2>Editar Perfil</h2>
                    <button class="btn btn-secondary" onclick="cerrarEdicionPerfil()">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                </div>
                
                <form id="profileEditForm" onsubmit="guardarCambiosPerfil(event)">
                    <div class="form-group">
                        <label for="editName">Nombre</label>
                        <input type="text" id="editName" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="editEmail">Correo Electrónico</label>
                        <input type="email" id="editEmail" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="editPassword">Nueva Contraseña (dejar en blanco para mantener la actual)</label>
                        <input type="password" id="editPassword" placeholder="••••••••">
                    </div>

                    <div class="form-group">
                        <label>Credencial de Estudiante</label>
                        <div class="credential-upload-container">
                            <div id="credentialPreview" class="credential-preview">
                                <div class="upload-placeholder" id="uploadPlaceholder">
                                    <i class="fas fa-id-card"></i>
                                    <span>Sube tu credencial de estudiante</span>
                                </div>
                                <img id="credentialImage" style="display: none; max-width: 100%; max-height: 200px; border-radius: 8px;">
                            </div>
                            <div class="credential-buttons">
                                <label for="credentialUpload" class="btn btn-secondary">
                                    <i class="fas fa-upload"></i> Seleccionar imagen
                                </label>
                                <button type="button" id="removeCredential" onclick="eliminarCredencial()" class="btn btn-danger" style="display: none;">
                                    <i class="fas fa-trash"></i> Eliminar
                                </button>
                            </div>
                            <input type="file" id="credentialUpload" accept="image/*" style="display: none;" onchange="previewCredencial(event)">
                            <small class="form-text text-muted">Sube una imagen clara de tu credencial de estudiante. Formatos aceptados: JPG, PNG.</small>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Guardar Cambios
                    </button>
                </form>
            </div>
        </div>
    </div>

    <script src="js/main.js"></script>
    <script src="js/recover-password.js"></script>
    <script>
        function cambiarMetodoLogin(metodo) {
            const correoGroup = document.getElementById('correoLoginGroup');
            const matriculaGroup = document.getElementById('matriculaLoginGroup');
            const botones = document.querySelectorAll('.login-option');
            
            botones.forEach(boton => {
                boton.classList.remove('active');
                if (boton.textContent.toLowerCase().includes(metodo)) {
                    boton.classList.add('active');
                }
            });
            
            if (metodo === 'correo') {
                correoGroup.style.display = 'block';
                matriculaGroup.style.display = 'none';
                document.getElementById('correoLogin').required = true;
                document.getElementById('matriculaLogin').required = false;
            } else {
                correoGroup.style.display = 'none';
                matriculaGroup.style.display = 'block';
                document.getElementById('correoLogin').required = false;
                document.getElementById('matriculaLogin').required = true;
            }
        }

        function validarCorreoInstitucional(correo) {
            const dominiosPermitidos = ['@cecyteqroo.edu.mx', '@cancun.tecnm.mx'];
            return dominiosPermitidos.some(dominio => correo.endsWith(dominio));
        }

        function validarCorreoEnTiempoReal(input) {
            const correo = input.value;
            const mensaje = document.getElementById('emailValidationMessage');
            const dominiosPermitidos = ['@cecyteqroo.edu.mx', '@cancun.tecnm.mx'];
            const esValido = dominiosPermitidos.some(dominio => correo.endsWith(dominio));

            if (correo && !esValido) {
                mensaje.textContent = 'Solo se permiten correos institucionales (@cecyteqroo.edu.mx o @cancun.tecnm.mx)';
                mensaje.style.display = 'block';
                input.setCustomValidity('Correo institucional inválido');
            } else {
                mensaje.style.display = 'none';
                input.setCustomValidity('');
            }
        }

        function crearUsuario() {
            const correo = document.getElementById('correo').value;
            const nombre = document.getElementById('nombre').value;
            const matricula = document.getElementById('matricula').value;
            const materia = document.getElementById('materia').value;
            const semestre = document.getElementById('semestre').value;
            const grupo = document.getElementById('grupo').value;
            const clave = document.getElementById('clave').value;
            const mensaje = document.getElementById('emailValidationMessage');

            if (!validarCorreoInstitucional(correo)) {
                mensaje.textContent = 'Solo se permiten correos institucionales (@cecyteqroo.edu.mx o @cancun.tecnm.mx)';
                mensaje.style.display = 'block';
                document.getElementById('correo').style.borderColor = '#dc2626';
                return;
            } else {
                mensaje.style.display = 'none';
                document.getElementById('correo').style.borderColor = '#22c55e';
            }

            // Validar que todos los campos estén completos
            if (!correo || !nombre || !matricula || !materia || !semestre || !grupo || !clave) {
                alert("Por favor, completa todos los campos.");
                return;
            }

            const fechaActual = new Date().toISOString();
            
            const usuario = {
                email: correo,
                nombre,
                matricula,
                materia,
                semestre,
                grupo,
                clave,
                puntos: 0,
                nivel: 1,
                insignias: [],
                creditos: 350, // Valor inicial de créditos
                fechaRegistro: fechaActual,
                ultimoAcceso: fechaActual,
                sesionActiva: true
            };

            // Verificar si el correo ya está registrado
            let usuarios = JSON.parse(localStorage.getItem("usuarios") || "[]");
            if (usuarios.some(u => u.email === correo)) {
                alert("Este correo electrónico ya está registrado.");
                return;
            }

            // Verificar si la matrícula ya está registrada
            if (usuarios.some(u => u.matricula === matricula)) {
                alert("Esta matrícula ya está registrada.");
                return;
            }

            // Guardar el usuario en el almacenamiento de usuarios
            usuarios.push(usuario);
            localStorage.setItem("usuarios", JSON.stringify(usuarios));

            // Guardar la sesión actual
            localStorage.setItem("usuario_actual", JSON.stringify(usuario));
            
            // Guardar la marca de sesión activa
            localStorage.setItem("sesion_activa", "true");

            // Ocultar botones de auth inmediatamente en modo móvil
            if (window.innerWidth <= 768) {
                document.getElementById("auth-nav").style.display = "none";
            }

            // Mostrar mensaje de bienvenida personalizado para nuevos usuarios
            mostrarBienvenida("registro", nombre);
            
            // Mostrar la aplicación después de cerrar el mensaje de bienvenida
            setTimeout(() => {
                mostrarApp(usuario);
            }, 500);
        }

        function mostrarSeccion(seccionId) {
            // Ocultar todas las secciones
            document.querySelectorAll('.dashboard-section').forEach(seccion => {
                seccion.classList.remove('active');
                seccion.style.display = 'none';
            });
            
            // Mostrar la sección seleccionada
            const seccionSeleccionada = document.getElementById(seccionId);
            seccionSeleccionada.classList.add('active');
            seccionSeleccionada.style.display = 'block';
            
            // Actualizar estado activo de los botones móviles
            document.querySelectorAll('.mobile-nav .nav-item').forEach(btn => {
                if (btn.textContent.trim().toLowerCase().includes(seccionId)) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            // Actualizar estado activo de los botones de escritorio
            document.querySelectorAll('.desktop-nav .btn-primary').forEach(btn => {
                if (btn.textContent.trim().toLowerCase().includes(seccionId)) {
                    btn.classList.add('active');
                } else {
                    btn.classList.remove('active');
                }
            });

            // Hacer scroll al inicio de la sección
            window.scrollTo({ top: 0, behavior: 'smooth' });

            if (seccionId === 'recompensas') {
                cargarCupones();
                
                // Verificar si el usuario es administrador
                if (usuario.email === 'admin@econnect.com') {
                    document.getElementById('admin-cupones').style.display = 'block';
                }
            }
        }
    </script>
</body>
</html>
